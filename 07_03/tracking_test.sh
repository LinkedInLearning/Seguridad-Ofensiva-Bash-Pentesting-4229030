#!/bin/bash

# Variables de prueba
CHROMEDRIVER_PATH="/ruta/al/chromedriver"
URL="http://tusitio.com/seguimiento"
ORDER_NUMBER="1234567890"

# Crear el script en Python para Selenium
cat << EOF > tracking_test.py
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
import time

# Configurar el navegador Chrome con Selenium
driver = webdriver.Chrome(executable_path='$CHROMEDRIVER_PATH')

# Abrir la página de seguimiento de pedidos
driver.get("$URL")

# Esperar a que la página cargue completamente
time.sleep(2)

# Ingresar el número de pedido
order_number_field = driver.find_element_by_name("order_number")
order_number_field.send_keys("$ORDER_NUMBER")

# Enviar el formulario de seguimiento
order_number_field.send_keys(Keys.RETURN)

# Esperar para cargar la página de detalles del pedido
time.sleep(3)

# Verificar que el seguimiento fue exitoso buscando el estado del pedido
if "Pedido en camino" in driver.page_source:
    print("Prueba de seguimiento de entregas exitosa.")
else:
    print("Prueba de seguimiento de entregas fallida.")

# Cerrar el navegador
driver.quit()
EOF

# Ejecutar el script de Selenium
python3 tracking_test.py

# Verificar el resultado de la prueba
if [ $? -eq 0 ]; then
    echo "Prueba completada sin errores."
else
    echo "Se encontraron errores durante la prueba."
fi

# Eliminar el script temporal de Python
rm tracking_test.py
