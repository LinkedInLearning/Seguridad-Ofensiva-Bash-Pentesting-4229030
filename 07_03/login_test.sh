#!/bin/bash

# Variables de prueba
CHROMEDRIVER_PATH="/ruta/al/chromedriver"  # Asegúrate de que el Chromedriver esté en la ruta correcta
URL="http://tusitio.com/login"
EMAIL="usuario@ejemplo.com"
PASSWORD="contraseña123"

# Crear el script en Python para Selenium
cat << EOF > login_test.py
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
import time

# Configurar el navegador Chrome con Selenium
driver = webdriver.Chrome(executable_path='$CHROMEDRIVER_PATH')

# Abrir la página de login
driver.get("$URL")

# Esperar a que la página cargue completamente
time.sleep(2)

# Encontrar el campo de email y enviar datos
email_field = driver.find_element_by_name("email")
email_field.send_keys("$EMAIL")

# Encontrar el campo de contraseña y enviar datos
password_field = driver.find_element_by_name("password")
password_field.send_keys("$PASSWORD")

# Enviar el formulario de login
password_field.send_keys(Keys.RETURN)

# Esperar un momento para cargar la página siguiente
time.sleep(3)

# Verificar que el login fue exitoso buscando una palabra clave
if "Bienvenido" in driver.page_source:
    print("Prueba de login exitosa.")
else:
    print("Prueba de login fallida.")

# Cerrar el navegador
driver.quit()
EOF

# Ejecutar el script de Selenium
python3 login_test.py

# Verificar el resultado de la prueba
if [ $? -eq 0 ]; then
    echo "Prueba completada sin errores."
else
    echo "Se encontraron errores durante la prueba."
fi

# Eliminar el script temporal de Python
rm login_test.py


## Para ejecutar:Configura el path a Chromedriver en CHROMEDRIVER_PATH. 
##Asegúrate de que Selenium y Python estén instalados en tu sistema (pip install selenium).
##chmod +x login_test.sh && ./login_test.sh
