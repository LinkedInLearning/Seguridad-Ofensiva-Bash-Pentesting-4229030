#!/bin/bash

# Funciones para simular bloques try-catch
try() {
  [[ $- = *e* ]]; SAVED_OPT_E=$?
  set +e
}

throw() {
  exit $1
}

catch() {
  export exception_code=$?
  (( $SAVED_OPT_E )) && set -e
  return $exception_code
}

# Simular un bloque try-catch
try
(
  echo "Bloque try: Comenzando."

  # Simular un error
  cp archivo_inexistente.txt /tmp/ || throw 100

  echo "Bloque try: Finalizado exitosamente."
)
catch || {
  case $exception_code in
    100
      echo "Error cr√≠tico: No se pudo copiar el archivo."
    ;;
    *
      echo "Error desconocido: $exception_code"
    ;;
  esac
}

