#!/bin/bash
#Este script combina varias herramientas para realizar un reconocimiento completo, incluyendo Nmap, theHarvester, dnsenum, whois, y dig, y guarda los resultados en archivos separados.


# Verificar si el usuario ha proporcionado un dominio o dirección IP como argumento
if [ -z "$1" ]; then
    echo "Uso: $0 <dominio_o_IP>"
    exit 1
fi

target=$1

# Crear un directorio para almacenar los resultados
mkdir -p resultados
echo "Resultados se guardarán en el directorio 'resultados'."

# 1. Escaneo básico de red con Nmap
echo "Ejecutando escaneo de red con Nmap..."
nmap -sS -p 1-65535 -v -oN resultados/nmap_scan_results.txt $target

# 2. Recolección de correos y subdominios con theHarvester
echo "Ejecutando theHarvester..."
theHarvester -d $target -l 500 -b google -f resultados/harvester_results.html

# 3. Enumeración de DNS con dnsenum
echo "Ejecutando dnsenum en $target..."
dnsenum $target > resultados/dnsenum_results.txt

# 4. Información WHOIS con whois
echo "Ejecutando whois en $target..."
whois $target > resultados/whois_results.txt

# 5. Consulta DNS con dig
echo "Ejecutando dig en $target..."
dig $target ANY > resultados/dig_results.txt

echo "Recolección de información completada. Los resultados se encuentran en el directorio 'resultados'."
