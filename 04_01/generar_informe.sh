#!/bin/bash

# Verificar si se proporciona un dominio o IP como argumento
if [ -z "$1" ]; then
    echo "Uso: $0 <dominio_o_IP>"
    exit 1
fi

target=$1

# Crear un directorio para guardar los resultados
mkdir -p resultados
echo "Resultados se guardarán en el directorio 'resultados'."

# Escaneo con Nmap
echo "Ejecutando escaneo con Nmap..."
nmap -sS -p 1-65535 -v -oN resultados/nmap_scan.txt $target

# Recolección de información con theHarvester
echo "Ejecutando theHarvester..."
theHarvester -d $target -l 500 -b google -f resultados/harvester_results.html

# WHOIS
echo "Ejecutando WHOIS..."
whois $target > resultados/whois.txt

# Generar informe
echo "Generando informe completo..."
cat resultados/nmap_scan.txt > resultados/informe_completo.txt
echo "" >> resultados/informe_completo.txt
cat resultados/whois.txt >> resultados/informe_completo.txt
echo "" >> resultados/informe_completo.txt
echo "Informe generado en 'resultados/informe_completo.txt'."
