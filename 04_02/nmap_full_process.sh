#!/bin/bash

# Verificar si se proporciona un objetivo (IP o dominio)
if [ -z "$1" ]; then
    echo "Uso: $0 <objetivo>"
    exit 1
fi

TARGET=$1

# Escaneo de red para encontrar hosts vivos
echo "Escaneando red para encontrar hosts vivos..."
sudo nmap -sn $TARGET -oG live_hosts.txt

# Extraer direcciones IP de hosts vivos
echo "Extrayendo direcciones IP de hosts vivos..."
grep "Up" live_hosts.txt | awk '{print $2}' > ip_addresses.txt

# Detectar sistemas operativos
echo "Detectando sistemas operativos de hosts vivos..."
sudo nmap -iL ip_addresses.txt -O -oN os_detection.txt

# Escanear servicios comunes
echo "Escaneando servicios comunes..."
sudo nmap -iL ip_addresses.txt -sV -oN common_services.txt

# Escaneo de vulnerabilidades
echo "Escaneando vulnerabilidades conocidas..."
sudo nmap -iL ip_addresses.txt --script vuln -oN vulnerabilities.txt

echo "Escaneos completados. Resultados guardados en archivos de texto."
