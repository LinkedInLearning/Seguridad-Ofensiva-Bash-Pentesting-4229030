#!/bin/bash

# Variables
TARGET="192.168.1.1"  # IP o dominio del objetivo
NMAP_RESULT="nmap_scan.xml"
HTML_REPORT="reporte_vulnerabilidades.html"

# Paso 1: Realizar escaneo de vulnerabilidades con Nmap
echo "[+] Iniciando escaneo de vulnerabilidades en $TARGET"
nmap -sV --script=vuln -oX $NMAP_RESULT $TARGET
echo "[+] Escaneo completado. Resultados guardados en $NMAP_RESULT"

# Paso 2: Generar reporte HTML utilizando xsltproc
echo "[+] Generando reporte HTML"
xsltproc -o $HTML_REPORT /usr/share/nmap/nmap.xsl $NMAP_RESULT

# Verificar si el reporte HTML fue generado correctamente
if [ -f "$HTML_REPORT" ]; then
    echo "[+] Reporte HTML generado exitosamente en $HTML_REPORT"
else
    echo "[-] Error: No se pudo generar el reporte HTML."
    exit 1
fi



## Paso 1: Realiza un escaneo de vulnerabilidades utilizando Nmap con el script vuln y guarda los resultados en un archivo XML (nmap_scan.xml).
## Paso 2: Convierte los resultados del escaneo XML en un reporte HTML utilizando xsltproc para facilitar la visualización de los hallazgos.
## Asegúrate de que Nmap y xsltproc estén instalados en tu sistema. 
## El reporte HTML estará disponible en reporte_vulnerabilidades.html.